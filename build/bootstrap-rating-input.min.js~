(function(e){e.fn.rating=function(){function n(t,n,r,i){var s=e(t).find("[data-value="+n+"]");s.removeClass(i).addClass(r);s.prevAll("[data-value]").removeClass(i).addClass(r);s.nextAll("[data-value]").removeClass(r).addClass(i)}function r(t,n,r){var i=e(t);i.find("[data-value]").removeClass(n).addClass(r)}function i(e,t){e.val(t).trigger("change");if(t===e.data("empty-value")){e.siblings(".rating-clear").hide()}else{e.siblings(".rating-clear").show()}}var t;for(t=this.length-1;t>=0;t--){var s,o,u=e(this[t]),a=u.data("max")||5,f=u.data("min")||0,l=u.data("icon-lib")||"glyphicon";active=u.data("active-icon")||"glyphicon-star",inactive=u.data("inactive-icon")||"glyphicon-star-empty",clearable=u.data("clearable")||null,clearable_i=u.data("clearable-icon")||"glyphicon-remove",stars="";for(o=f;o<=a;o++){stars+=['<i class="',l," ",inactive,'" data-value="',o,'"></i>'].join("")}if(clearable){stars+=[' <a class="rating-clear" style="display:none;" href="javascript:void">','<span class="',l," ",clearable_i,'"></span> ',clearable,"</a>"].join("")}var c=u.clone(true).addClass("hidden").data("max",a).data("min",f).data("icon-lib",l).data("active-icon",active).data("inactive-icon",inactive);s=['<div class="rating-input">',stars,"</div>"].join("");u.replaceWith(e(s).append(c))}e(".rating-input").on("mouseenter","[data-value]",function(){var t=e(this);input=t.siblings("input");n(t.closest(".rating-input"),t.data("value"),input.data("active-icon"),input.data("inactive-icon"))}).on("mouseleave","[data-value]",function(){var t=e(this),i=t.siblings("input"),s=i.val(),o=i.data("min"),u=i.data("max"),a=i.data("active-icon"),f=i.data("inactive-icon");if(s>=o&&s<=u){n(t.closest(".rating-input"),s,a,f)}else{r(t.closest(".rating-input"),a,f)}}).on("click","[data-value]",function(t){var n=e(this),r=n.data("value"),s=n.siblings("input");i(s,r);t.preventDefault();return false}).on("click",".rating-clear",function(t){var n=e(this),s=n.siblings("input"),o=s.data("active-icon"),u=s.data("inactive-icon");i(s,s.data("empty-value"));r(n.closest(".rating-input"),o,u);t.preventDefault();return false}).each(function(){var t=e(this).find("input"),i=t.val(),s=t.data("min"),o=t.data("max");if(i!==""&&+i>=s&&+i<=o){n(this,i);e(this).find(".rating-clear").show()}else{t.val(t.data("empty-value"));r(this)}})};e(function(){if(e("input.rating[type=number]").length>0){e("input.rating[type=number]").rating()}})})(jQuery)
